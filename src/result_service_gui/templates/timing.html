{% extends "adm_base.html" %}
{% block titlecontainer %}
  <div class="w3-quart"></div>
  <div class="w3-half">
{% endblock %}

{% block titleheader %}
  Passeringer {{ valgt_klasse }}
{% endblock %}

{% block refresh %}{% endblock %}

{% block titlemain %}
  Passeringer {{ registration_mode }}
{% endblock %}

{% block menuitems %}
  <li class=dropdown id=topborder>
    <a href=javascript:void(0) class=dropbtn>Velg modus</a>
    <div class=dropdown-content>
        <a href=timing?event_id={{ event_id }}&registration_mode=start_bib>Start - bib</a>
        <a href=timing?event_id={{ event_id }}&registration_mode=start_check>Start - check</a>
        <a href=timing?event_id={{ event_id }}&registration_mode=lap>Mellomtid</a>
        <a href=timing?event_id={{ event_id }}&registration_mode=finish_bib>Mål - bib</a>
        <a href=timing?event_id={{ event_id }}&registration_mode=finish_check>Mål - check</a>
        <a href=timing?event_id={{ event_id }}&registration_mode=control>Kontroll</a>
    </div>
  </li>
{% endblock %}

{% block content %}
  {% if registration_mode == "" %}
    <p>
      <b>- Start</b> - registrere starter, skrive inn startnummer.<br>
      <b>- Start</b> - registrere starter, krysse av på liste.<br>
      <b>- Passering</b> - registrere mellomtid.<br>
      <b>- Mål</b> - registrere målpassering, skrive inn startnummer.<br>
      <b>- Mål</b> - registrere målpassering, skrive inn heat-plassering.<br>
      <b>- Kontroll</b> - korringeringer og manglende registreringer.<br>
      <br>
      <br>
  {% elif registration_mode == "control" %}
    <table>
       <tr id=headerblue>
        <td>Løpsklasse</td>
        <td>Første start</td>
        <td>Deltakere</td>
        <td>Heat</td>
      </tr>
      <tr>
        <td>{{ race.raceclass }}</td>
        <td>{{ race.start_time }}</td>
        <td>{{ race.no_of_contestants }}</td>
        <td>{{ race.heat }}</td>
      </tr>
      <tr>
        <td id=spacer colspan=4> </td>
      </tr>
    </table>
    <div id=spacer></div>
    <form action=/timing method=post>
      <table>
         <tr id=headerblue>
          <td>Startnummer</td>
          <td>Navn</td>
          <td>Klubb</td>
          <td>Starttid</td>
          <td>Heat</td>
          <td>Passeringspunkt</td>
          <td>Passeringstid</td>
          <td>Plass</td>
        </tr>
        {% for start in passeringer %}
          <tr>
            <td>{{ start.bib }}</td>
            <td>{{ start.name }}</td>
            <td>{{ start.club }}</td>
            <td>{{ start.starttime }}</td>
            <td>{{ start.race }}</td>
            <td><input type=text name="point" value="Mål"></td>
            <td><input type=text name="splittime" value=""></td>
            <td><input type=text name="splitplace" value="2"></td>
          </tr>
        {% endfor %}
        <tr>
          <td id=spacer colspan=8> </td>
        </tr>
        <tr>
            <td colspan=7 align=right>
              <input type="hidden" name="event_id" value="{{ event_id }}">
              <input type="submit" name="{{ registration_mode }}" value="  Oppdater  ">
            </td>
            <td></td>
        </tr>
      </table>
    </form>
  {% else %}
    <form action=/timing method=post>
      <table>
        <tr>
          <td id=spacer colspan=3> </td>
        </tr>
        <tr id=headerblue>
          <td>Passeringspunkt</td>
          <td>Startnummer</td>
          <td></td>
        </tr>
        <tr>
          <td id=spacer colspan=3> </td>
        </tr>
        <tr>
          <td><input type=text name="point" value="Mål"></td>
          <td><input type=text name="bib" value=""></td>
          <td>Ved flere passeringer, bruk space mellom startnummer. x før eller etter startnummer indikerer at løper ikke startet. Eksempel: 2 3x 4</td>
        </tr>
        <tr>
          <td></td>
            <td align=right>
              <input type="hidden" name="event_id" value="{{ event_id }}">
              <input type="submit" name={{ registration_mode }} value="  Registrer  ">
            </td>
            <td></td>
        </tr>
      </table>
    </form>
  {% endif %}
{% endblock %}
