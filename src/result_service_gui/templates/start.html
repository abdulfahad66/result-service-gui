{% extends "adm_base.html" %}
{% block titlecontainer %}
  <div class="w3-10"></div>
  <div class="w3-80">
{% endblock %}

{% block titleheader %}
  Startlister {{ valgt_klubb }}{{ valgt_klasse }}
{% endblock %}

{% block refresh %}300{% endblock %}

{% block titlemain %}
  Startlister {{ valgt_klubb }}{{ valgt_klasse }}
{% endblock %}

{% block menuitems %}
  <li class=dropdown id=topborder>
    <a href=javascript:void(0) class=dropbtn>Velg klasse</a>
    <div class=dropdown-content>
      {% for klasse in raceclasses %}
        <a href=start?klasse={{ klasse.name }}&event_id={{ event_id }}>{{ klasse.ageclass_name }}</a>
      {% endfor %}
    </div>
  </li>
  <li class=dropdown id=topborder>
    <a href="start?klasse=live&event_id={{ event_id }}" class=dropbtn alt="Se hvem som starter nå, viser de neste 8 heat">Starter nå</a>
  </li>
{% endblock %}

{% block content %}

  {% if valgt_klasse == "live" %}
    <div class="w3-row-padding">
      <div class="{{ colclass }}">
  {% endif %}
  {% if event.competition_format == "Interval Start" %}
    <table>
       <tr id=headerblue>
        <td>Startnummer</td>
        <td>Navn</td>
        <td>Klubb</td>
        <td>Tid</td>
        <td>Heat</td>
        <td>Posisjon</td>
      </tr>
      {% for start in startliste %}
        <tr>
          <td>{{ start.bib }}</td>
          <td>{{ start.name }}</td>
          <td>{{ start.club }}</td>
          <td>{{ start.starttime }}</td>
          <td>{{ start.race }}</td>
          <td>{{ start.pos }}</td>
        </tr>
      {% endfor %}
      <tr>
        <td id=spacer colspan=4> </td>
      </tr>
    </table>
    <div id=spacer></div>
  {% else %}
    {% for race in races %}
      {% if race.Heat in colseparators %}
        </div>
        <div class="{{ colclass }}">
      {% endif %}
      <table>
        <tr id=headerblue>
            {% if race.round == "Q" %}
              <td colspan=2>{{ race.raceclass }} Kvartfinale {{ race.index }}{{ race.heat }}</td>
            {% elif race.round == "S" %}
              <td colspan=2>{{ race.raceclass }} Semifinale {{ race.index }}{{ race.heat }}</td>
            {% elif race.round == "F" %}
              <td colspan=2>{{ race.raceclass }} Finale {{ race.index }}</td>
            {% endif %}
          <td>Kl. {{ race.start_time }}</td>
          <td>{% if race.round != "F" %}Neste heat: {{ race.next_race }}{% endif %}</td>
        </tr>
        <tr id=subheader>
          <td><div id={{ race.heat }} >Pos</div></td>
          <td>Nr</td>
          <td>Todo: fix filter</td>
          <td></td>
        </tr>
        {% for loper in startliste %}
          {% if loper.race_id == race.id[1] %}
            <tr>
              <td>{{ loper.position }}</td>
              <td><div id={{ loper.bib }}>{{ loper.bib }}</div></td>
              <td>
                {% if valgt_klasse != "live" %}
                  <a href=live?klasse={{ valgt_klasse }}&startnr={{ loper.bib }}>{{ loper.name }}</a>
                {% else %}
                  {{ loper.name }}
                {% endif %}
              </td>
              <td>{{ loper.club }}</td>
            </tr>
          {% endif %}
        {% endfor %}
      </table>
      <div id=spacer></div>
    {% endfor %}
  {% endif %} {# note: end competition_format #}
  {% if valgt_klasse == "live" %}
      </div>
    </div>
  {% endif %}
{% endblock %}
